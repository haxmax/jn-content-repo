---
title: Scope Chain
sidebar: modern-javascript
label: article
disableTableOfContents: false
tableOfContentsDepth: 2
---

# Scope

The current context of execution. The context in which values and expressions are "visible" or can be referenced. If a variable or other expression is not "in the current scope," then it is unavailable for use. Scopes can also be layered in a hierarchy, so that child scopes have access to parent scopes, but not vice versa.

### Global scope

In a programming environment, the global scope is the scope that contains, and is visible in, all other scopes.

In client-side JavaScript, the global scope is generally the web page inside which all the code is being executed.

### Function scope

Each and every function creates its own scope. And the variables declared inside that function are only accessible inside that function and any of its nested functions. This is also called Local Scope.

### Block scope

ES6 introduced let and const variables. With that, it introduced the block scope. Block scope means that the variables defined inside a code clock {} can only be used inside it.

For example, a variable created inside an if statement or for loop can only be accessed within that code block. Same as function scope, it is not accessible outside of the block scope.

# Execution Context

Execution context (EC) is defined as the environment in which the JavaScript code is executed. By environment, I mean the value of this, variables, objects, and functions JavaScript code has access to at a particular time.

> Every code execution in javascript happens inside in execution context.

Execution context in JavaScript is of three types as:

## Global execution context (GEC)

This is the default execution context in which JS code start its execution when the file first loads in the browser. All of the global code i.e. code which is not inside any function or object is executed inside the global execution context. GEC cannot be more than one because only one global environment is possible for JS code execution as the JS engine is single threaded.

## Functional execution context (FEC):

Functional execution context is defined as the context created by the JS engine whenever it finds any function call. Each function has its own execution context. It can be more than one. Functional execution context has access to all the code of the global execution context though vice versa is not applicable. While executing the global execution context code, if JS engine finds a function call, it creates a new functional execution context for that function. After function is completed, control is returned to place where it was invoked.

> ðŸ’¡ In the browser context, if the code is executing in strict mode value of this is undefined else it is window object in the function execution context.

## Eval:

Execution context inside eval function.

```js
let x = 10
let y = 20
let text = "x * y"
let result = eval(text)
```

> ðŸ’¡ Eval function should not used as it exposes the the current scope to third party library which may lead to security risk.

## Creation of Execution Context

JavaScript engine creates the execution context in the following two stages:

- Creation phase
- Execution phase

### Creation phase

In this phase JS engine has called a function but its execution has not started. In the creation phase, JS engine is in the compilation phase and it just scans over the function code to compile the code, it doesnâ€™t execute any code.
In the creation phase, JS engine performs the following task:

- Creates the Activation object or the Variable object: Activation object is a special object in JS which contain all the variables, function arguments and inner functions declaration information. As activation object is a special object it does not have the `__proto__` property.
- Creates the scope chain: Once the activation object gets created, the JS engine initializes the scope chain which is a list of all the variables objects inside which the current function exists. This also includes the variable object of the global execution context. Scope chain also contains the current function variable object.
- Determines the value of this: After the scope chain, the JavaScript engine initializes the value of this.

## Execution phase:

In the execution phase, JS engines will again scan through the function to update the variable object with the values of the variables and will execute the code.

## Call Stack

This maintains the order of execution context.

## lexical environment

lexical environment is local memory plus reference to lexical environment of its parent. More on this in closure section.

More reading on Execution context

<a src="https://medium.com/@happymishra66/execution-context-in-javascript-319dd72e8e2c">
  Execution context and java internals
</a>
